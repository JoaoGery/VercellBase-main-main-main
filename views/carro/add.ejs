<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Adicionar Carro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <main class="container py-4">
        <h1 class="mb-4">Adicionar Carro</h1>

        <% var carro = carro || {}; %>

        <% if (errors && errors.length) { %>
            <div class="alert alert-danger">
                <ul class="mb-0">
                    <% errors.forEach(function(err){ %>
                        <li><%= err.msg || err %></li>
                    <% }); %>
                </ul>
            </div>
        <% } %>

        <form action="/carro/add" method="POST" novalidate>
            <div class="row g-3">
                <div class="col-md-6">
                    <label for="marca" class="form-label">Marca</label>
                    <input id="marca" name="marca" type="text" class="form-control" required
                        value="<%= carro.marca || '' %>">
                </div>

                <div class="col-md-6">
                    <label for="modelo" class="form-label">Modelo</label>
                    <input id="modelo" name="modelo" type="text" class="form-control" required
                        value="<%= carro.modelo || '' %>">
                </div>

                <div class="col-md-4">
                    <label for="ano" class="form-label">Ano</label>
                    <input id="ano" name="ano" type="number" min="1886" max="2100" class="form-control" required
                        value="<%= carro.ano || '' %>">
                </div>

                <div class="col-md-4">
                    <label for="placa" class="form-label">Placa</label>
                    <input id="placa" name="placa" type="text" class="form-control" required
                        value="<%= carro.placa || '' %>">
                </div>

                <div class="col-md-4">
                    <label for="diaria" class="form-label">Diária (R$)</label>
                    <input id="diaria" name="diaria" type="number" step="0.01" min="0" class="form-control" required
                        value="<%= carro.diaria || '' %>">
                </div>

                <div class="col-md-12">
                    <label for="imagem" class="form-label">Imagem do Carro (URL opcional)</label>
                    <input id="imagem" name="imagem" type="text" class="form-control"
                        placeholder="Exemplo: https://exemplo.com/carro.jpg"
                        value="<%= carro.imagem || '' %>">
                </div>

                <div class="col-12">
                    <button type="submit" class="btn btn-primary">Salvar</button>
                    <a href="/carro" class="btn btn-secondary ms-2">Cancelar</a>
                </div>
            </div>
        </form>
    </main>

    <script>
        // Validação simples de frontend (Bootstrap)
        (function () {
            'use strict'
            const forms = document.querySelectorAll('form')
            Array.prototype.slice.call(forms).forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                        form.classList.add('was-validated')
                    }
                }, false)
            })
        })()
    </script>
</body>
</html>
